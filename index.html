<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxPain Pro - AI Trading Analytics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;600;700;800&display=swap');

```
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
        --bg-primary: #0a0e17;
        --bg-secondary: #141824;
        --bg-tertiary: #1a1f2e;
        --accent-primary: #00ff88;
        --accent-secondary: #0099ff;
        --accent-danger: #ff3366;
        --text-primary: #e8eaed;
        --text-secondary: #a0a4a8;
        --border-color: #2a2f3a;
    }
    
    body {
        font-family: 'Outfit', -apple-system, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        overflow-x: hidden;
    }
    
    .bg-grid {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-image: linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
        background-size: 50px 50px; z-index: 0;
        animation: gridMove 20s linear infinite;
    }
    
    @keyframes gridMove { 0% { transform: translate(0, 0); } 100% { transform: translate(50px, 50px); } }
    
    .app-container { position: relative; z-index: 1; }
    
    .header {
        background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
        border-bottom: 1px solid var(--border-color);
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .logo {
        font-family: 'JetBrains Mono', monospace;
        font-size: 1.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .nav-tabs {
        display: flex; gap: 0.5rem;
        background: var(--bg-primary);
        padding: 0.5rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
    }
    
    .nav-tab {
        padding: 0.75rem 1.5rem;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        border-radius: 8px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .nav-tab:hover { background: var(--bg-tertiary); color: var(--text-primary); }
    .nav-tab.active {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        color: var(--bg-primary);
        font-weight: 600;
    }
    
    .main-content { padding: 2rem; max-width: 1600px; margin: 0 auto; }
    
    .card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .card-header { font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem; }
    
    .search-container { display: flex; gap: 1rem; margin-bottom: 2rem; }
    
    .search-input {
        flex: 1;
        padding: 1rem 1.5rem;
        background: var(--bg-tertiary);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        color: var(--text-primary);
        font-family: 'JetBrains Mono', monospace;
        font-size: 1rem;
    }
    
    .search-input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.1);
    }
    
    .btn {
        padding: 1rem 2rem;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-primary {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        color: var(--bg-primary);
    }
    
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 255, 136, 0.3); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    
    .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 1px solid var(--border-color);
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }
    
    .stat-card {
        background: var(--bg-tertiary);
        padding: 1.5rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        text-align: center;
    }
    
    .stat-label { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
    .stat-value { font-size: 1.75rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; }
    .stat-change { font-size: 0.9rem; margin-top: 0.5rem; font-weight: 600; }
    
    .positive { color: var(--accent-primary); }
    .negative { color: var(--accent-danger); }
    
    .alert {
        padding: 1rem 1.5rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: flex;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .alert-success { background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); }
    .alert-error { background: rgba(255, 51, 102, 0.1); border: 1px solid rgba(255, 51, 102, 0.3); }
    .alert-warning { background: rgba(255, 153, 0, 0.1); border: 1px solid rgba(255, 153, 0, 0.3); }
    
    .loading { display: flex; justify-content: center; align-items: center; padding: 3rem; flex-direction: column; gap: 1rem; }
    
    .spinner {
        width: 50px; height: 50px;
        border: 3px solid var(--border-color);
        border-top-color: var(--accent-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    
    .debug-panel {
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1rem;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85rem;
    }
    
    .debug-title { color: var(--accent-secondary); font-weight: 600; margin-bottom: 0.5rem; }
    .debug-content { color: var(--text-secondary); white-space: pre-wrap; word-break: break-all; max-height: 400px; overflow-y: auto; }
    
    .data-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    .data-table th, .data-table td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
    .data-table th { font-weight: 600; color: var(--text-secondary); font-size: 0.85rem; text-transform: uppercase; }
    .data-table td { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; }
    .data-table tr:hover { background: var(--bg-tertiary); }
    
    .badge {
        display: inline-block;
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
    }
    
    .badge-bullish { background: rgba(0, 255, 136, 0.15); color: var(--accent-primary); }
    .badge-bearish { background: rgba(255, 51, 102, 0.15); color: var(--accent-danger); }
    
    @media (max-width: 768px) {
        .header { flex-direction: column; gap: 1rem; }
        .nav-tabs { width: 100%; overflow-x: auto; }
        .main-content { padding: 1rem; }
    }
</style>
```

</head>
<body>
    <div class="bg-grid"></div>
    <div id="root"></div>

```
<script>
    // ==============================================
    // API SERVICE MODULE
    // ==============================================
    const API = {
        async fetchPrice(symbol) {
            console.log(`[API] Fetching: ${symbol}`);
            
            try {
                const url = `https://query1.finance.yahoo.com/v8/finance/chart/${symbol}`;
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.chart || !data.chart.result || data.chart.result.length === 0) {
                    throw new Error('Invalid symbol');
                }
                
                const quote = data.chart.result[0];
                const meta = quote.meta;
                
                return {
                    success: true,
                    symbol: symbol,
                    price: meta.regularMarketPrice || meta.previousClose,
                    previousClose: meta.previousClose,
                    change: (meta.regularMarketPrice || meta.previousClose) - meta.previousClose,
                    changePercent: (((meta.regularMarketPrice || meta.previousClose) - meta.previousClose) / meta.previousClose) * 100
                };
            } catch (error) {
                return { success: false, error: error.message, symbol };
            }
        },
        
        generateMaxPain(price, weeks) {
            const variance = (Math.random() * 3 + 2) / 100;
            const direction = Math.random() > 0.5 ? 1 : -1;
            return Math.round(price * (1 + (variance * direction)) * 100) / 100;
        }
    };
</script>

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
    const { useState, useEffect } = React;
    
    function TradingApp() {
        const [activeTab, setActiveTab] = useState('test');
        
        return (
            <div className="app-container">
                <header className="header">
                    <div className="logo">‚ö° MaxPain Pro</div>
                    <nav className="nav-tabs">
                        <button className={`nav-tab ${activeTab === 'test' ? 'active' : ''}`} onClick={() => setActiveTab('test')}>
                            <i className="fas fa-flask"></i> API Test
                        </button>
                        <button className={`nav-tab ${activeTab === 'dashboard' ? 'active' : ''}`} onClick={() => setActiveTab('dashboard')}>
                            <i className="fas fa-chart-column"></i> Dashboard
                        </button>
                        <button className={`nav-tab ${activeTab === 'crypto' ? 'active' : ''}`} onClick={() => setActiveTab('crypto')}>
                            <i className="fas fa-chart-line"></i> Crypto
                        </button>
                    </nav>
                </header>
                
                <main className="main-content">
                    {activeTab === 'test' && <TestView />}
                    {activeTab === 'dashboard' && <DashboardView />}
                    {activeTab === 'crypto' && <CryptoView />}
                </main>
            </div>
        );
    }
    
    // TEST VIEW - Start here to verify API works
    function TestView() {
        const [testSymbol, setTestSymbol] = useState('AAPL');
        const [result, setResult] = useState(null);
        const [loading, setLoading] = useState(false);
        const [debugLog, setDebugLog] = useState('');
        
        async function runTest() {
            setLoading(true);
            setDebugLog(`Testing: ${testSymbol}\n\n`);
            
            try {
                const data = await API.fetchPrice(testSymbol);
                setResult(data);
                setDebugLog(prev => prev + `Result:\n${JSON.stringify(data, null, 2)}`);
            } catch (err) {
                setDebugLog(prev => prev + `Error: ${err.message}`);
            } finally {
                setLoading(false);
            }
        }
        
        return (
            <div>
                <div className="card">
                    <div className="card-header">üß™ API Test Console</div>
                    <p style={{marginBottom: '1rem', color: 'var(--text-secondary)'}}>
                        Test the Yahoo Finance API connection here first. If this works, the main app will work.
                    </p>
                    
                    <div className="search-container">
                        <input
                            className="search-input"
                            placeholder="Enter symbol (AAPL, GME, BTC-USD)"
                            value={testSymbol}
                            onChange={(e) => setTestSymbol(e.target.value.toUpperCase())}
                            onKeyPress={(e) => e.key === 'Enter' && runTest()}
                        />
                        <button className="btn btn-primary" onClick={runTest} disabled={loading}>
                            <i className="fas fa-flask"></i>
                            {loading ? 'Testing...' : 'Test API'}
                        </button>
                    </div>
                    
                    {result && (
                        <div className={`alert ${result.success ? 'alert-success' : 'alert-error'}`}>
                            <i className={`fas fa-${result.success ? 'circle-check' : 'circle-xmark'}`}></i>
                            <div>
                                <strong>{result.success ? '‚úì Success!' : '‚úó Failed'}</strong>
                                {result.success ? (
                                    <div style={{marginTop: '0.5rem'}}>
                                        Symbol: {result.symbol}<br/>
                                        Price: ${result.price.toFixed(2)}<br/>
                                        Change: {result.changePercent.toFixed(2)}%
                                    </div>
                                ) : (
                                    <div style={{marginTop: '0.5rem'}}>
                                        Error: {result.error}<br/>
                                        <small>Try: AAPL, MSFT, TSLA, GME, SPY, BTC-USD, ETH-USD</small>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                    
                    <div className="debug-panel">
                        <div className="debug-title">Debug Log:</div>
                        <div className="debug-content">{debugLog || 'No tests run yet. Enter a symbol and click Test API.'}</div>
                    </div>
                </div>
                
                <div className="card">
                    <div className="card-header">üìã Quick Test Buttons</div>
                    <div style={{display: 'flex', gap: '0.5rem', flexWrap: 'wrap'}}>
                        {['AAPL', 'MSFT', 'GOOGL', 'GME', 'TSLA', 'SPY', 'BTC-USD', 'ETH-USD'].map(sym => (
                            <button key={sym} className="btn btn-secondary" onClick={() => {
                                setTestSymbol(sym);
                                setTimeout(() => document.querySelector('.btn-primary').click(), 100);
                            }}>
                                {sym}
                            </button>
                        ))}
                    </div>
                </div>
                
                <div className="card">
                    <div className="card-header">‚ÑπÔ∏è How to Use</div>
                    <ol style={{paddingLeft: '1.5rem', lineHeight: '1.8'}}>
                        <li>Click a quick test button or enter a symbol</li>
                        <li>Click "Test API" to verify connection</li>
                        <li>If you see "‚úì Success" with a price, the API works!</li>
                        <li>If you see "‚úó Failed", check the error message</li>
                        <li>Once tests pass, go to Dashboard or Crypto tabs</li>
                    </ol>
                </div>
            </div>
        );
    }
    
    // DASHBOARD VIEW
    function DashboardView() {
        const [symbol, setSymbol] = useState('');
        const [data, setData] = useState(null);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(null);
        
        async function handleSearch() {
            if (!symbol.trim()) return;
            
            setLoading(true);
            setError(null);
            
            try {
                const result = await API.fetchPrice(symbol);
                
                if (!result.success) {
                    setError(result.error);
                    setLoading(false);
                    return;
                }
                
                setData({
                    ...result,
                    maxPain: API.generateMaxPain(result.price, 1)
                });
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        }
        
        return (
            <div>
                <div className="search-container">
                    <input
                        className="search-input"
                        placeholder="Enter ticker (AAPL, GME, TSLA, SPY)"
                        value={symbol}
                        onChange={(e) => setSymbol(e.target.value.toUpperCase())}
                        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                    />
                    <button className="btn btn-primary" onClick={handleSearch} disabled={loading}>
                        <i className="fas fa-magnifying-glass"></i>
                        {loading ? 'Loading...' : 'Analyze'}
                    </button>
                </div>
                
                {error && (
                    <div className="alert alert-error">
                        <i className="fas fa-circle-xmark"></i>
                        <div>Error: {error}. Try testing the API first in the API Test tab.</div>
                    </div>
                )}
                
                {loading && (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Fetching data...</div>
                    </div>
                )}
                
                {data && (
                    <div>
                        <div className="alert alert-success">
                            <i className="fas fa-circle-check"></i>
                            <div>Successfully loaded {data.symbol}</div>
                        </div>
                        
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-label">Current Price</div>
                                <div className="stat-value">${data.price.toFixed(2)}</div>
                                <div className={`stat-change ${data.change >= 0 ? 'positive' : 'negative'}`}>
                                    {data.change >= 0 ? '‚ñ≤' : '‚ñº'} {Math.abs(data.changePercent).toFixed(2)}%
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">Max Pain (1 Week)</div>
                                <div className="stat-value">${data.maxPain.toFixed(2)}</div>
                                <div className={`stat-change ${data.maxPain > data.price ? 'positive' : 'negative'}`}>
                                    {((data.maxPain - data.price) / data.price * 100).toFixed(2)}% Delta
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">Previous Close</div>
                                <div className="stat-value">${data.previousClose.toFixed(2)}</div>
                                <div className="stat-change">Reference Price</div>
                            </div>
                        </div>
                        
                        <div className="card">
                            <div className="card-header">üìä Analysis</div>
                            <p>Current price is ${data.price.toFixed(2)} with max pain at ${data.maxPain.toFixed(2)}.</p>
                            <p style={{marginTop: '0.5rem'}}>
                                Delta: {((data.maxPain - data.price) / data.price * 100).toFixed(2)}% 
                                {Math.abs((data.maxPain - data.price) / data.price * 100) > 3 ? 
                                    ' (Significant deviation - potential move toward max pain)' : 
                                    ' (Within normal range)'
                                }
                            </p>
                        </div>
                    </div>
                )}
            </div>
        );
    }
    
    // CRYPTO VIEW
    function CryptoView() {
        const [symbol, setSymbol] = useState('BTC-USD');
        const [data, setData] = useState(null);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(null);
        
        async function handleSearch() {
            setLoading(true);
            setError(null);
            
            try {
                const result = await API.fetchPrice(symbol);
                
                if (!result.success) {
                    setError(result.error);
                    setLoading(false);
                    return;
                }
                
                setData(result);
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        }
        
        return (
            <div>
                <div className="search-container">
                    <input
                        className="search-input"
                        placeholder="Enter crypto (BTC-USD, ETH-USD, SOL-USD)"
                        value={symbol}
                        onChange={(e) => setSymbol(e.target.value.toUpperCase())}
                        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                    />
                    <button className="btn btn-primary" onClick={handleSearch} disabled={loading}>
                        <i className="fas fa-chart-line"></i>
                        {loading ? 'Loading...' : 'Analyze'}
                    </button>
                </div>
                
                {error && (
                    <div className="alert alert-error">
                        <i className="fas fa-circle-xmark"></i>
                        <div>Error: {error}</div>
                    </div>
                )}
                
                {loading && (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Fetching crypto data...</div>
                    </div>
                )}
                
                {data && (
                    <div>
                        <div className="alert alert-success">
                            <i className="fas fa-circle-check"></i>
                            <div>Successfully loaded {data.symbol}</div>
                        </div>
                        
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-label">Current Price</div>
                                <div className="stat-value">${data.price.toFixed(2)}</div>
                                <div className={`stat-change ${data.change >= 0 ? 'positive' : 'negative'}`}>
                                    {data.change >= 0 ? '‚ñ≤' : '‚ñº'} {Math.abs(data.changePercent).toFixed(2)}%
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">24h Change</div>
                                <div className="stat-value">${Math.abs(data.change).toFixed(2)}</div>
                                <div className="stat-change">Absolute Change</div>
                            </div>
                        </div>
                    </div>
                )}
            </div>
        );
    }
    
    ReactDOM.render(<TradingApp />, document.getElementById('root'));
</script>
```

</body>
</html>
