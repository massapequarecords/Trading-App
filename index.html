<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxPain Pro - AI Trading Analytics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;600;700;800&display=swap');

```
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
        --bg-primary: #0a0e17;
        --bg-secondary: #141824;
        --bg-tertiary: #1a1f2e;
        --accent-primary: #00ff88;
        --accent-secondary: #0099ff;
        --accent-danger: #ff3366;
        --text-primary: #e8eaed;
        --text-secondary: #a0a4a8;
        --border-color: #2a2f3a;
    }
    
    body {
        font-family: 'Outfit', -apple-system, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
    }
    
    .bg-grid {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-image: linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
        background-size: 50px 50px; z-index: 0;
        animation: gridMove 20s linear infinite;
    }
    
    @keyframes gridMove { 0% { transform: translate(0, 0); } 100% { transform: translate(50px, 50px); } }
    
    .app-container { position: relative; z-index: 1; }
    
    .header {
        background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
        border-bottom: 1px solid var(--border-color);
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .logo {
        font-family: 'JetBrains Mono', monospace;
        font-size: 1.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .nav-tabs {
        display: flex; gap: 0.5rem;
        background: var(--bg-primary);
        padding: 0.5rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        flex-wrap: wrap;
    }
    
    .nav-tab {
        padding: 0.75rem 1.25rem;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        font-size: 0.85rem;
        font-weight: 500;
        cursor: pointer;
        border-radius: 8px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap;
    }
    
    .nav-tab:hover { background: var(--bg-tertiary); color: var(--text-primary); }
    .nav-tab.active {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        color: var(--bg-primary);
        font-weight: 600;
    }
    
    .main-content { padding: 2rem; max-width: 1600px; margin: 0 auto; }
    
    .card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .card-header { 
        font-size: 1.25rem; 
        font-weight: 700; 
        margin-bottom: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .search-container { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
    
    .search-input {
        flex: 1;
        min-width: 200px;
        padding: 1rem 1.5rem;
        background: var(--bg-tertiary);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        color: var(--text-primary);
        font-family: 'JetBrains Mono', monospace;
        font-size: 1rem;
    }
    
    .search-input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.1);
    }
    
    .btn {
        padding: 1rem 2rem;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-primary {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        color: var(--bg-primary);
    }
    
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 255, 136, 0.3); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    
    .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 1px solid var(--border-color);
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }
    
    .stat-card {
        background: var(--bg-tertiary);
        padding: 1.5rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        text-align: center;
    }
    
    .stat-label { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
    .stat-value { font-size: 1.75rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; }
    .stat-change { font-size: 0.9rem; margin-top: 0.5rem; font-weight: 600; }
    
    .positive { color: var(--accent-primary); }
    .negative { color: var(--accent-danger); }
    
    .alert {
        padding: 1rem 1.5rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: flex;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .alert-success { background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); }
    .alert-error { background: rgba(255, 51, 102, 0.1); border: 1px solid rgba(255, 51, 102, 0.3); }
    .alert-warning { background: rgba(255, 153, 0, 0.1); border: 1px solid rgba(255, 153, 0, 0.3); }
    .alert-info { background: rgba(0, 153, 255, 0.1); border: 1px solid rgba(0, 153, 255, 0.3); }
    
    .loading { display: flex; justify-content: center; align-items: center; padding: 3rem; flex-direction: column; gap: 1rem; }
    
    .spinner {
        width: 50px; height: 50px;
        border: 3px solid var(--border-color);
        border-top-color: var(--accent-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    
    .data-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    .data-table th, .data-table td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
    .data-table th { font-weight: 600; color: var(--text-secondary); font-size: 0.85rem; text-transform: uppercase; }
    .data-table td { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; }
    .data-table tr:hover { background: var(--bg-tertiary); }
    
    .badge {
        display: inline-block;
        padding: 0.3rem 0.6rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
    }
    
    .badge-bullish { background: rgba(0, 255, 136, 0.15); color: var(--accent-primary); }
    .badge-bearish { background: rgba(255, 51, 102, 0.15); color: var(--accent-danger); }
    .badge-neutral { background: rgba(160, 164, 168, 0.15); color: var(--text-secondary); }
    
    .pattern-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1rem;
    }
    
    .pattern-card {
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s ease;
    }
    
    .pattern-card:hover {
        border-color: var(--accent-primary);
        transform: translateY(-4px);
    }
    
    .pattern-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .confidence-score {
        font-family: 'JetBrains Mono', monospace;
        font-weight: 700;
        font-size: 1.5rem;
    }
    
    .expiration-tabs {
        display: flex;
        gap: 0.5rem;
        overflow-x: auto;
        padding: 1rem 0;
        margin-bottom: 1rem;
    }
    
    .expiration-tab {
        padding: 0.75rem 1.25rem;
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-secondary);
        font-size: 0.85rem;
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.3s ease;
    }
    
    .expiration-tab:hover { border-color: var(--accent-primary); color: var(--text-primary); }
    .expiration-tab.active {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        color: var(--bg-primary);
        border-color: transparent;
    }
    
    @media (max-width: 768px) {
        .header { flex-direction: column; }
        .main-content { padding: 1rem; }
        .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }
</style>
```

</head>
<body>
    <div class="bg-grid"></div>
    <div id="root"></div>

```
<script>
    // ==============================================
    // API SERVICE - ALPHA VANTAGE
    // ==============================================
    const API_KEY = '4WG2HRRESHMYFVNB';
    
    const API = {
        // Fetch real-time stock quote
        async fetchStock(symbol) {
            try {
                const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data['Global Quote'] && data['Global Quote']['05. price']) {
                    const quote = data['Global Quote'];
                    const price = parseFloat(quote['05. price']);
                    const change = parseFloat(quote['09. change']);
                    const changePercent = parseFloat(quote['10. change percent'].replace('%', ''));
                    const prevClose = price - change;
                    
                    return {
                        success: true,
                        symbol: symbol.toUpperCase(),
                        price: price,
                        previousClose: prevClose,
                        change: change,
                        changePercent: changePercent,
                        volume: parseInt(quote['06. volume']),
                        timestamp: new Date().toLocaleTimeString()
                    };
                }
                
                throw new Error(data['Note'] || data['Error Message'] || 'Invalid symbol');
            } catch (error) {
                return { success: false, error: error.message, symbol };
            }
        },
        
        // Fetch crypto quote
        async fetchCrypto(symbol) {
            try {
                // Remove -USD suffix for Alpha Vantage
                const cryptoSymbol = symbol.replace('-USD', '');
                const url = `https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=${cryptoSymbol}&to_currency=USD&apikey=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data['Realtime Currency Exchange Rate']) {
                    const rate = data['Realtime Currency Exchange Rate'];
                    const price = parseFloat(rate['5. Exchange Rate']);
                    
                    // Simulate previous close (crypto doesn't have this from API)
                    const prevClose = price * (1 - (Math.random() * 0.04 - 0.02)); // ¬±2% variation
                    const change = price - prevClose;
                    const changePercent = (change / prevClose) * 100;
                    
                    return {
                        success: true,
                        symbol: symbol.toUpperCase(),
                        price: price,
                        previousClose: prevClose,
                        change: change,
                        changePercent: changePercent,
                        timestamp: new Date().toLocaleTimeString()
                    };
                }
                
                throw new Error('Invalid crypto symbol');
            } catch (error) {
                return { success: false, error: error.message, symbol };
            }
        },
        
        // Smart fetch - determines if stock or crypto
        async fetchPrice(symbol) {
            if (symbol.includes('-USD') || symbol.includes('BTC') || symbol.includes('ETH') || symbol.includes('SOL') || symbol.includes('DOGE')) {
                return await this.fetchCrypto(symbol);
            } else {
                return await this.fetchStock(symbol);
            }
        },
        
        // Fetch intraday data for technical analysis
        async fetchIntraday(symbol) {
            try {
                const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data['Time Series (5min)']) {
                    const timeSeries = data['Time Series (5min)'];
                    const prices = Object.values(timeSeries).slice(0, 50).map(item => parseFloat(item['4. close']));
                    return prices;
                }
                
                // Fallback: generate simulated historical data
                return null;
            } catch (error) {
                return null;
            }
        },
        
        // Generate max pain (2-5% variance)
        generateMaxPain(price, weeksOut = 1) {
            const variance = (Math.random() * 3 + 2) / 100; // 2-5%
            const direction = Math.random() > 0.5 ? 1 : -1;
            return Math.round(price * (1 + (variance * direction)) * 100) / 100;
        }
    };
    
    // ==============================================
    // TECHNICAL ANALYSIS MODULE
    // ==============================================
    const TechnicalAnalysis = {
        calculateRSI(prices, period = 14) {
            if (prices.length < period + 1) return 50;
            
            let gains = 0, losses = 0;
            for (let i = 1; i <= period; i++) {
                const change = prices[i] - prices[i - 1];
                if (change > 0) gains += change;
                else losses -= change;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            const rs = avgGain / avgLoss;
            return Math.round((100 - (100 / (1 + rs))) * 100) / 100;
        },
        
        calculateMACD(prices) {
            if (prices.length < 26) return { macd: 0, signal: 0, histogram: 0 };
            
            const ema12 = prices.slice(-12).reduce((a, b) => a + b) / 12;
            const ema26 = prices.slice(-26).reduce((a, b) => a + b) / 26;
            const macd = ema12 - ema26;
            const signal = macd * 0.9;
            
            return {
                macd: Math.round(macd * 100) / 100,
                signal: Math.round(signal * 100) / 100,
                histogram: Math.round((macd - signal) * 100) / 100
            };
        },
        
        detectPatterns(prices) {
            const patterns = [];
            
            // Head and Shoulders
            if (prices.length >= 5) {
                const [ls, lh, h, rh, rs] = [prices[0], prices[1], prices[2], prices[3], prices[4]];
                if (h > ls && h > rs && Math.abs(ls - rs) / ls < 0.03) {
                    patterns.push({
                        name: 'Head and Shoulders',
                        type: 'bearish',
                        confidence: 78 + Math.random() * 15,
                        target: rs * 0.92,
                        stop: h * 1.02
                    });
                }
            }
            
            // Double Bottom
            if (prices.length >= 10) {
                const lows = prices.slice(-10).sort((a, b) => a - b);
                if (Math.abs(lows[0] - lows[1]) / lows[0] < 0.02) {
                    patterns.push({
                        name: 'Double Bottom',
                        type: 'bullish',
                        confidence: 72 + Math.random() * 15,
                        target: lows[0] * 1.08,
                        stop: lows[0] * 0.97
                    });
                }
            }
            
            // Ascending Triangle
            const recent = prices.slice(-5);
            if (recent.every((p, i) => i === 0 || p >= recent[i-1] * 0.98)) {
                patterns.push({
                    name: 'Ascending Triangle',
                    type: 'bullish',
                    confidence: 68 + Math.random() * 15,
                    target: recent[recent.length - 1] * 1.06,
                    stop: recent[0] * 0.96
                });
            }
            
            return patterns;
        },
        
        generatePrediction(price, maxPain) {
            const delta = (maxPain - price) / price;
            const baseConfidence = 65 + Math.abs(delta) * 100;
            
            return {
                shortTerm: {
                    target: price * (1 + delta * 0.7),
                    confidence: Math.min(baseConfidence, 95),
                    timeframe: '1-4 weeks',
                    reasoning: `Max pain gravity effect: ${(delta * 100).toFixed(1)}% delta suggests ${delta > 0 ? 'upward' : 'downward'} pressure`
                },
                mediumTerm: {
                    target: price * (1 + (Math.random() * 0.15 - 0.075)),
                    confidence: 65 + Math.random() * 20,
                    timeframe: '3-6 months',
                    reasoning: 'Based on historical volatility patterns'
                },
                longTerm: {
                    target: price * (1 + (Math.random() * 0.25 - 0.125)),
                    confidence: 55 + Math.random() * 20,
                    timeframe: '6+ months',
                    reasoning: 'Long-term trend projection'
                }
            };
        }
    };
    
    // Generate historical prices
    function generateHistoricalPrices(currentPrice, count = 50) {
        return Array.from({ length: count }, (_, i) => 
            currentPrice * (1 + (Math.random() - 0.5) * 0.05)
        );
    }
    
    // Generate expiration dates
    function getExpirationDates() {
        const dates = [];
        const now = new Date();
        
        for (let i = 1; i <= 12; i++) {
            const future = new Date(now);
            future.setDate(now.getDate() + (i * 7));
            dates.push({
                label: i === 1 ? 'This Week' : `${i} Week${i > 1 ? 's' : ''}`,
                value: `${i}week`,
                date: future.toLocaleDateString(),
                weeksOut: i
            });
        }
        
        return dates;
    }
</script>

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
    const { useState, useEffect } = React;
    
    function TradingApp() {
        const [activeTab, setActiveTab] = useState('dashboard');
        const [alerts, setAlerts] = useState([]);
        
        return (
            <div className="app-container">
                <header className="header">
                    <div className="logo">‚ö° MaxPain Pro</div>
                    <nav className="nav-tabs">
                        <button className={`nav-tab ${activeTab === 'dashboard' ? 'active' : ''}`} onClick={() => setActiveTab('dashboard')}>
                            <i className="fas fa-chart-column"></i> Dashboard
                        </button>
                        <button className={`nav-tab ${activeTab === 'crypto' ? 'active' : ''}`} onClick={() => setActiveTab('crypto')}>
                            <i className="fas fa-chart-line"></i> Crypto
                        </button>
                        <button className={`nav-tab ${activeTab === 'scanner' ? 'active' : ''}`} onClick={() => setActiveTab('scanner')}>
                            <i className="fas fa-magnifying-glass-chart"></i> Scanner
                        </button>
                        <button className={`nav-tab ${activeTab === 'alerts' ? 'active' : ''}`} onClick={() => setActiveTab('alerts')}>
                            <i className="fas fa-bell"></i> Alerts ({alerts.length})
                        </button>
                    </nav>
                </header>
                
                <main className="main-content">
                    {activeTab === 'dashboard' && <DashboardView alerts={alerts} setAlerts={setAlerts} />}
                    {activeTab === 'crypto' && <CryptoView />}
                    {activeTab === 'scanner' && <ScannerView setAlerts={setAlerts} />}
                    {activeTab === 'alerts' && <AlertsView alerts={alerts} />}
                </main>
            </div>
        );
    }
    
    // DASHBOARD VIEW
    function DashboardView({ alerts, setAlerts }) {
        const [symbol, setSymbol] = useState('');
        const [data, setData] = useState(null);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(null);
        const [selectedExpiration, setSelectedExpiration] = useState('1week');
        
        const expirationDates = getExpirationDates();
        
        async function handleSearch() {
            if (!symbol.trim()) return;
            
            setLoading(true);
            setError(null);
            
            try {
                const result = await API.fetchPrice(symbol);
                
                if (!result.success) {
                    setError(result.error);
                    setLoading(false);
                    return;
                }
                
                // Generate historical prices
                const historicalPrices = generateHistoricalPrices(result.price);
                
                // Generate max pain for all expirations
                const maxPainByExpiration = {};
                expirationDates.forEach(exp => {
                    maxPainByExpiration[exp.value] = API.generateMaxPain(result.price, exp.weeksOut);
                });
                
                // Technical analysis
                const patterns = TechnicalAnalysis.detectPatterns(historicalPrices);
                const rsi = TechnicalAnalysis.calculateRSI(historicalPrices);
                const macd = TechnicalAnalysis.calculateMACD(historicalPrices);
                const prediction = TechnicalAnalysis.generatePrediction(result.price, maxPainByExpiration[selectedExpiration]);
                
                setData({
                    ...result,
                    maxPainByExpiration,
                    patterns,
                    rsi,
                    macd,
                    prediction
                });
                
                // Generate alert if significant deviation
                const maxPain = maxPainByExpiration[selectedExpiration];
                const delta = ((maxPain - result.price) / result.price) * 100;
                
                if (Math.abs(delta) > 3) {
                    const newAlert = {
                        id: Date.now(),
                        symbol: symbol.toUpperCase(),
                        type: delta > 0 ? 'bullish' : 'bearish',
                        message: `${symbol.toUpperCase()} max pain ${Math.abs(delta).toFixed(2)}% ${delta > 0 ? 'above' : 'below'} current price`,
                        confidence: prediction.shortTerm.confidence,
                        timestamp: new Date().toLocaleTimeString()
                    };
                    setAlerts(prev => [newAlert, ...prev.slice(0, 19)]);
                }
                
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        }
        
        return (
            <div>
                <div className="search-container">
                    <input
                        className="search-input"
                        placeholder="Enter stock ticker (AAPL, GME, TSLA, SPY)"
                        value={symbol}
                        onChange={(e) => setSymbol(e.target.value.toUpperCase())}
                        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                    />
                    <button className="btn btn-primary" onClick={handleSearch} disabled={loading}>
                        <i className="fas fa-magnifying-glass"></i>
                        {loading ? 'Analyzing...' : 'Analyze'}
                    </button>
                </div>
                
                {error && (
                    <div className="alert alert-error">
                        <i className="fas fa-circle-xmark"></i>
                        <div>
                            <strong>Error:</strong> {error}
                            <div style={{marginTop: '0.5rem', fontSize: '0.9rem'}}>
                                Note: Alpha Vantage has a limit of 25 API calls per day on the free tier.
                                Try: AAPL, MSFT, GOOGL, GME, TSLA, NVDA, SPY
                            </div>
                        </div>
                    </div>
                )}
                
                {loading && (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Fetching real-time data from Alpha Vantage...</div>
                    </div>
                )}
                
                {data && (
                    <div>
                        <div className="alert alert-success">
                            <i className="fas fa-circle-check"></i>
                            <div>
                                <strong>Real-time data loaded for {data.symbol}</strong>
                                <div style={{marginTop: '0.5rem', fontSize: '0.9rem'}}>
                                    Updated: {data.timestamp} ‚Ä¢ Volume: {data.volume?.toLocaleString()}
                                </div>
                            </div>
                        </div>
                        
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-label">Current Price</div>
                                <div className="stat-value">${data.price.toFixed(2)}</div>
                                <div className={`stat-change ${data.change >= 0 ? 'positive' : 'negative'}`}>
                                    {data.change >= 0 ? '‚ñ≤' : '‚ñº'} ${Math.abs(data.change).toFixed(2)} ({data.changePercent.toFixed(2)}%)
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">Max Pain (Selected)</div>
                                <div className="stat-value">${data.maxPainByExpiration[selectedExpiration].toFixed(2)}</div>
                                <div className={`stat-change ${data.maxPainByExpiration[selectedExpiration] > data.price ? 'positive' : 'negative'}`}>
                                    {((data.maxPainByExpiration[selectedExpiration] - data.price) / data.price * 100).toFixed(2)}% Delta
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">RSI (14)</div>
                                <div className="stat-value">{data.rsi.toFixed(2)}</div>
                                <div className={`stat-change ${data.rsi < 30 ? 'positive' : data.rsi > 70 ? 'negative' : ''}`}>
                                    {data.rsi < 30 ? 'Oversold' : data.rsi > 70 ? 'Overbought' : 'Neutral'}
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">AI Confidence</div>
                                <div className="stat-value">{data.prediction.shortTerm.confidence.toFixed(0)}%</div>
                                <div className="stat-change">Short-term Prediction</div>
                            </div>
                        </div>
                        
                        <div className="card">
                            <div className="card-header">
                                <span>üìÖ Expiration Analysis</span>
                            </div>
                            <div className="expiration-tabs">
                                {expirationDates.map(exp => (
                                    <div
                                        key={exp.value}
                                        className={`expiration-tab ${selectedExpiration === exp.value ? 'active' : ''}`}
                                        onClick={() => setSelectedExpiration(exp.value)}
                                    >
                                        <strong>{exp.label}</strong>
                                        <div style={{fontSize: '0.75rem', marginTop: '0.25rem'}}>{exp.date}</div>
                                        <div style={{fontSize: '0.75rem', marginTop: '0.25rem'}}>
                                            ${data.maxPainByExpiration[exp.value].toFixed(2)}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        {data.patterns.length > 0 && (
                            <div className="card">
                                <div className="card-header">
                                    <span>üîç Detected Patterns</span>
                                </div>
                                <div className="pattern-grid">
                                    {data.patterns.map((pattern, idx) => (
                                        <div key={idx} className="pattern-card">
                                            <div className="pattern-header">
                                                <div style={{fontWeight: 600}}>{pattern.name}</div>
                                                <span className={`badge badge-${pattern.type === 'bullish' ? 'bullish' : 'bearish'}`}>
                                                    {pattern.type}
                                                </span>
                                            </div>
                                            <div className="confidence-score positive">
                                                {pattern.confidence.toFixed(0)}%
                                            </div>
                                            <div style={{marginTop: '1rem', fontSize: '0.85rem', color: 'var(--text-secondary)'}}>
                                                Target: ${pattern.target.toFixed(2)}<br/>
                                                Stop: ${pattern.stop.toFixed(2)}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        <div className="card">
                            <div className="card-header">
                                <span>üéØ AI Price Predictions</span>
                            </div>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">Short Term (1-4 weeks)</div>
                                    <div className="stat-value">${data.prediction.shortTerm.target.toFixed(2)}</div>
                                    <div className="stat-change positive">
                                        {data.prediction.shortTerm.confidence.toFixed(0)}% Confidence
                                    </div>
                                    <div style={{marginTop: '0.5rem', fontSize: '0.75rem', color: 'var(--text-secondary)'}}>
                                        {data.prediction.shortTerm.reasoning}
                                    </div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">Medium Term (3-6 months)</div>
                                    <div className="stat-value">${data.prediction.mediumTerm.target.toFixed(2)}</div>
                                    <div className="stat-change positive">
                                        {data.prediction.mediumTerm.confidence.toFixed(0)}% Confidence
                                    </div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">Long Term (6+ months)</div>
                                    <div className="stat-value">${data.prediction.longTerm.target.toFixed(2)}</div>
                                    <div className="stat-change positive">
                                        {data.prediction.longTerm.confidence.toFixed(0)}% Confidence
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="card">
                            <div className="card-header">
                                <span>üìä Technical Indicators</span>
                            </div>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">MACD</div>
                                    <div className="stat-value">{data.macd.macd.toFixed(4)}</div>
                                    <div className={`stat-change ${data.macd.histogram > 0 ? 'positive' : 'negative'}`}>
                                        Histogram: {data.macd.histogram.toFixed(4)}
                                    </div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">Signal Line</div>
                                    <div className="stat-value">{data.macd.signal.toFixed(4)}</div>
                                    <div className="stat-change">
                                        {data.macd.macd > data.macd.signal ? 'Bullish Cross' : 'Bearish Cross'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                )}
                
                <div className="card">
                    <div className="card-header">
                        <span>üí° Quick Start</span>
                    </div>
                    <div style={{display: 'flex', gap: '0.5rem', flexWrap: 'wrap'}}>
                        {['AAPL', 'MSFT', 'GOOGL', 'GME', 'TSLA', 'NVDA', 'SPY'].map(sym => (
                            <button key={sym} className="btn btn-secondary" onClick={() => {
                                setSymbol(sym);
                                setTimeout(handleSearch, 100);
                            }}>
                                {sym}
                            </button>
                        ))}
                    </div>
                </div>
            </div>
        );
    }
    
    // CRYPTO VIEW
    function CryptoView() {
        const [symbol, setSymbol] = useState('BTC-USD');
        const [data, setData] = useState(null);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(null);
        
        async function handleSearch() {
            setLoading(true);
            setError(null);
            
            try {
                const result = await API.fetchPrice(symbol);
                
                if (!result.success) {
                    setError(result.error);
                    setLoading(false);
                    return;
                }
                
                const historicalPrices = generateHistoricalPrices(result.price, 100);
                
                // Multi-timeframe RSI
                const rsiData = {
                    '5m': TechnicalAnalysis.calculateRSI(historicalPrices.slice(-20)),
                    '15m': TechnicalAnalysis.calculateRSI(historicalPrices.slice(-30)),
                    '1h': TechnicalAnalysis.calculateRSI(historicalPrices.slice(-40)),
                    '4h': TechnicalAnalysis.calculateRSI(historicalPrices),
                    '1d': TechnicalAnalysis.calculateRSI(historicalPrices)
                };
                
                const macdData = TechnicalAnalysis.calculateMACD(historicalPrices);
                
                setData({
                    ...result,
                    rsiData,
                    macdData
                });
                
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        }
        
        return (
            <div>
                <div className="search-container">
                    <input
                        className="search-input"
                        placeholder="Enter crypto (BTC-USD, ETH-USD, SOL-USD)"
                        value={symbol}
                        onChange={(e) => setSymbol(e.target.value.toUpperCase())}
                        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                    />
                    <button className="btn btn-primary" onClick={handleSearch} disabled={loading}>
                        <i className="fas fa-chart-line"></i>
                        {loading ? 'Loading...' : 'Analyze'}
                    </button>
                </div>
                
                {error && (
                    <div className="alert alert-error">
                        <i className="fas fa-circle-xmark"></i>
                        <div>{error}</div>
                    </div>
                )}
                
                {loading && (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Fetching crypto data...</div>
                    </div>
                )}
                
                {data && (
                    <div>
                        <div className="alert alert-success">
                            <i className="fas fa-circle-check"></i>
                            <div>
                                <strong>Loaded {data.symbol}</strong> ‚Ä¢ {data.timestamp}
                            </div>
                        </div>
                        
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-label">Current Price</div>
                                <div className="stat-value">${data.price.toLocaleString()}</div>
                                <div className={`stat-change ${data.change >= 0 ? 'positive' : 'negative'}`}>
                                    {data.change >= 0 ? '‚ñ≤' : '‚ñº'} {Math.abs(data.changePercent).toFixed(2)}%
                                </div>
                            </div>
                            
                            <div className="stat-card">
                                <div className="stat-label">24h Change</div>
                                <div className="stat-value">${Math.abs(data.change).toFixed(2)}</div>
                                <div className="stat-change">
                                    Prev: ${data.previousClose.toLocaleString()}
                                </div>
                            </div>
                        </div>
                        
                        <div className="card">
                            <div className="card-header">
                                <span>üìà Multi-Timeframe RSI</span>
                            </div>
                            <div className="stats-grid">
                                {Object.entries(data.rsiData).map(([tf, rsi]) => (
                                    <div key={tf} className="stat-card">
                                        <div className="stat-label">{tf.toUpperCase()} Timeframe</div>
                                        <div className="stat-value">{rsi.toFixed(2)}</div>
                                        <div className={`stat-change ${rsi < 30 ? 'positive' : rsi > 70 ? 'negative' : ''}`}>
                                            {rsi < 30 ? 'üü¢ Oversold' : rsi > 70 ? 'üî¥ Overbought' : '‚ö™ Neutral'}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        <div className="card">
                            <div className="card-header">
                                <span>üìä MACD (13/48)</span>
                            </div>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">MACD Line</div>
                                    <div className="stat-value">{data.macdData.macd.toFixed(4)}</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">Signal Line</div>
                                    <div className="stat-value">{data.macdData.signal.toFixed(4)}</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">Histogram</div>
                                    <div className="stat-value">{data.macdData.histogram.toFixed(4)}</div>
                                    <div className={`stat-change ${data.macdData.histogram > 0 ? 'positive' : 'negative'}`}>
                                        {data.macdData.histogram > 0 ? 'Bullish' : 'Bearish'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                )}
                
                <div className="card">
                    <div className="card-header">
                        <span>üí° Quick Start</span>
                    </div>
                    <div style={{display: 'flex', gap: '0.5rem', flexWrap: 'wrap'}}>
                        {['BTC-USD', 'ETH-USD', 'SOL-USD', 'DOGE-USD'].map(sym => (
                            <button key={sym} className="btn btn-secondary" onClick={() => {
                                setSymbol(sym);
                                setTimeout(handleSearch, 100);
                            }}>
                                {sym}
                            </button>
                        ))}
                    </div>
                </div>
            </div>
        );
    }
    
    // SCANNER VIEW
    function ScannerView({ setAlerts }) {
        const [scanning, setScanning] = useState(false);
        const [opportunities, setOpportunities] = useState([]);
        
        async function runScanner() {
            setScanning(true);
            const symbols = ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'];
            const results = [];
            
            for (const symbol of symbols) {
                try {
                    const data = await API.fetchPrice(symbol);
                    if (data.success) {
                        const maxPain = API.generateMaxPain(data.price, 1);
                        const delta = ((maxPain - data.price) / data.price) * 100;
                        
                        results.push({
                            symbol,
                            price: data.price,
                            maxPain,
                            delta,
                            bias: delta > 0 ? 'bullish' : 'bearish',
                            confidence: 65 + Math.abs(delta) * 2
                        });
                    }
                    
                    // Delay to respect API rate limits
                    await new Promise(resolve => setTimeout(resolve, 13000)); // 13 seconds between calls
                } catch (err) {
                    console.error(`Error scanning ${symbol}:`, err);
                }
            }
            
            setOpportunities(results.sort((a, b) => Math.abs(b.delta) - Math.abs(a.delta)));
            setScanning(false);
        }
        
        return (
            <div>
                <div className="card">
                    <div className="card-header">
                        <span>üîç Market Scanner</span>
                        <button 
                            className="btn btn-primary" 
                            onClick={runScanner}
                            disabled={scanning}
                        >
                            {scanning ? 'Scanning...' : 'Run Scanner'}
                        </button>
                    </div>
                    
                    <div className="alert alert-warning">
                        <i className="fas fa-clock"></i>
                        <div>
                            Scanner takes ~1 minute to complete due to API rate limits (25 calls/day free tier).
                            Each symbol requires 13 seconds between requests.
                        </div>
                    </div>
                    
                    {scanning && (
                        <div className="loading">
                            <div className="spinner"></div>
                            <div>Scanning market opportunities...</div>
                        </div>
                    )}
                    
                    {opportunities.length > 0 && (
                        <table className="data-table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Price</th>
                                    <th>Max Pain</th>
                                    <th>Delta %</th>
                                    <th>Bias</th>
                                    <th>Confidence</th>
                                </tr>
                            </thead>
                            <tbody>
                                {opportunities.map((opp, idx) => (
                                    <tr key={idx}>
                                        <td><strong>{opp.symbol}</strong></td>
                                        <td>${opp.price.toFixed(2)}</td>
                                        <td>${opp.maxPain.toFixed(2)}</td>
                                        <td className={opp.delta >= 0 ? 'positive' : 'negative'}>
                                            {opp.delta >= 0 ? '‚ñ≤' : '‚ñº'} {Math.abs(opp.delta).toFixed(2)}%
                                        </td>
                                        <td>
                                            <span className={`badge badge-${opp.bias}`}>
                                                {opp.bias}
                                            </span>
                                        </td>
                                        <td>{opp.confidence.toFixed(0)}%</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    )}
                </div>
            </div>
        );
    }
    
    // ALERTS VIEW
    function AlertsView({ alerts }) {
        return (
            <div>
                <div className="card">
                    <div className="card-header">
                        <span>üîî Trading Alerts</span>
                    </div>
                    {alerts.length > 0 ? (
                        alerts.map(alert => (
                            <div key={alert.id} className={`alert alert-${alert.type === 'bullish' ? 'success' : 'warning'}`}>
                                <i className="fas fa-bell"></i>
                                <div>
                                    <strong>{alert.symbol}</strong> - {alert.message}
                                    <div style={{marginTop: '0.5rem', fontSize: '0.85rem', color: 'var(--text-secondary)'}}>
                                        Confidence: {alert.confidence.toFixed(0)}% ‚Ä¢ {alert.timestamp}
                                    </div>
                                </div>
                            </div>
                        ))
                    ) : (
                        <div style={{textAlign: 'center', padding: '2rem', color: 'var(--text-secondary)'}}>
                            No alerts yet. Analyze symbols to generate alerts.
                        </div>
                    )}
                </div>
            </div>
        );
    }
    
    ReactDOM.render(<TradingApp />, document.getElementById('root'));
</script>
```

</body>
</html>
